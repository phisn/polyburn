syntax = "proto3";

message ReplayModel {
    repeated ReplayFrameModel frames = 1;
}

message ReplayFrameModel {
    bool thrust = 1;
    float rotation = 2;
}

message ReplayInputModel {
    repeated ReplayFrameInputModel frames = 1;

    string worldname = 2;
    string gamemode = 3;
}

message ReplayFrameInputModel {
    bool thrust = 1;
    float rotation = 2;

    optional KeyboardInputModel real_keyboard = 3;
    optional MouseInputModel real_mouse = 4;
    optional TouchInputModel real_touch = 5;
}

message KeyboardInputModel {
    bool l = 1;
    bool r = 2;
    bool thrust = 3;
}

message MouseInputModel {
    bool down = 1;
    uint32 x = 2;
    uint32 y = 3;
    bool thrust = 4; 
}

message TouchInputModel {
    optional uint32 rotation_x = 1;
    optional uint32 rotation_y = 2;

    optional uint32 thrust_x = 3;
    optional uint32 thrust_y = 4;
}
